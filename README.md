# 箱入り娘パズル Webアプリケーション 🧩

**A*アルゴリズムを使用した箱入り娘パズル解決システム**

## 🌐 デプロイ済みアプリ
**👉 [https://hakoiripuzzle.onrender.com](https://hakoiripuzzle.onrender.com) でプレイ可能！**

## 🎯 概要

箱入り娘（Hakoiri Musume）は日本の伝統的なスライディングパズルです。このWebアプリケーションは、**A*アルゴリズム**を使って任意の初期配置から最短手数での解法を自動で見つけ、リアルタイム進捗表示と共に**1手順ずつ視覚的に解法プロセスを確認**できるWEBアプリです。
![](/image/hakoiri.png)

## ✨ 主な機�E・特徴

### 🖱�E�E高度なUI操佁E
- **ドラチE��&ドロチE�E**: 既存ピースを�Eウスで直感的に移勁E
- **クリチE��配置**: ピ�Eス選択パネルからクリチE��で新規�E置
- **形状ベ�Eス選抁E*: 箱入り娘、横ブロチE��、縦ブロチE��、小ブロチE��を�E動管琁E
- **配置制陁E*: 吁E��ースタイプ�E最大数を�E動チェチE��

### 🎯 A*アルゴリズム解況E
- **最適解保証**: A*アルゴリズムによる最短手数での解決
- **高度なヒューリスチE��チE��**: マンハッタン距離 + 経路障害物評価
- **効玁E��探索**: 重褁E��態排除による高速化

### 📊 リアルタイム進捗表示
- **Server-Sent Events**: リアルタイム進捗更新
- **詳細統訁E*: 探索件数、現在手数、推定残り手数
- **経過時間**: 探索開始から�E経過時間表示
- **中止機�E**: 探索中の任意タイミングでの中止

### 📺 スチE��プバイスチE��プ解法表示
- **完�Eな解法パス**: 初期状態からゴールまでの全手頁E
- **ナビゲーション**: 剁E次ボタンで自由な手頁E��誁E
- **視覚的フィードバチE��**: 吁E��頁E��の盤面状態を明確表示

## 🧩 パズルピ�Eス詳細

| ピ�Eス | サイズ | 説昁E| 色 | 最大数 |
|--------|--------|------|-----|-------|
| **箱入り威E(MP)** | 2ÁE | メインピ�Eス・ゴール対象 | 🔴 赤色 | 1 |
| **横ブロチE�� (H1-H4)** | 2ÁE | 横長ブロチE�� | 🔵 青色系 | 4 |
| **縦ブロチE�� (V1-V4)** | 1ÁE | 縦長ブロチE�� | 🟢 緑色系 | 4 |
| **小ブロチE�� (S1-S4)** | 1ÁE | 小さなブロチE�� | 🟡 黁E��系 | 4 |

**🎯 目樁E*: 赤ぁE��入り娘！EP�E�を盤面下部の中央位置�E�E行目以降、E-2列目�E�に移勁E

## 🚀 実行方況E

### 1. 環墁E��備
```bash
pip install -r requirements.txt
```

### 2. アプリケーション起勁E
```bash
python app.py
```

### 3. ブラウザでアクセス
```
http://localhost:5000
```

## 📖 詳細使ぁE��ガイチE

### Phase 1: パズル配置設宁E
1. **ピ�Eス選抁E*: 右側パネルから配置したぁE��ースタイプをクリチE��
2. **配置方況E*: 
   - **新規�E置**: 選択したピースタイプで空ぁE��ぁE��セルをクリチE��
   - **移勁E*: 既存ピースをドラチE��&ドロチE�E
   - **削除**: 「空」を選択してピ�EスをクリチE��
3. **盤面リセチE��**: 「盤面リセチE��」�Eタンで全てクリア

### Phase 2: 自動解法実衁E
1. **探索開姁E*: 「探索開始」�EタンをクリチE��
2. **進捗監要E*: リアルタイム統計で探索状況を確誁E
   - 探索件数: 調査済み盤面数
   - 現在手数: 探索中の手頁E��
   - 推定残り: ヒューリスチE��チE��による推宁E
3. **中止機�E**: 忁E��に応じて「中止」�Eタンで探索停止

### Phase 3: 解法確誁E
1. **スチE��プナビゲーション**: 剁E次ボタンで手頁E��確誁E
2. **完�Eな解法パス**: 初期状態からゴールまでの最短経路
3. **手頁E��ウンター**: 現在位置と総手数の表示

## 🔧 技術仕槁E

### バックエンチE
- **フレームワーク**: Flask (Python)
- **アルゴリズム**: A*探索アルゴリズム
- **並行�E琁E*: threading によるバックグラウンド解況E
- **通信**: Server-Sent Events による進捗�E信

### フロントエンチE
- **UI**: HTML5, CSS3, Vanilla JavaScript
- **レスポンシチE*: モバイル対応デザイン
- **リアルタイム**: EventSource による進捗受信
- **インタラクション**: ドラチE��&ドロチE�E + クリチE��操佁E

### 最適化技衁E
- **ヒューリスチE��チE��関数**: マンハッタン距離 + 障害物評価
- **状態管琁E*: ハッシュベ�Eスの重褁E��除
- **メモリ効玁E*: 最小限の状態保持


